MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;****************************************************************
                      00002                                 ; PC de 13 bits                                                 ; PC    
                            LATH     | 4 | 3 |              PCL     |7|6|5|4|3|2|1|0|       11 bits del PROGRAM COUNTER (PC)
                      00003                                 ; MEMORIA                       PAGINA 0                        ----> 00
                            05 a la 07FF            05     a la 2047
                      00004         ; 4K x 14               ; DE PROGRAMA           PAGINA 1                        ----> 0800 a la 
                            0FFF            2048 a la 4095                          2048 a la ( 2^11 = 2048 ) x 2 = 4096 pal
                      00005                                 ; MEMORIA
                      00006         ;4K x 14                ; DE DATOS                                      CATALOGADA EN 4 BANCOS  
                            -----> 00 a la 1FF                                      
                      00007         ;14 es la amplitud del bus de la memoria de programa
                      00008 ;***************************************************************
                      00009                         list    p=16F88
                      00010                         #include        <p16F88.inc>
                      00001         LIST
                      00002 ; P16F88.INC  Standard Header File, Version 1.00    Microchip Technology, Inc.
                      00401         LIST
                      00011 ;***************************************************************
                      00012 BANCO0          MACRO                           ; todos los 16F88 son capaces de direccionar bloque un b
                            loque de 8K continuos de palabra de memoria de programa
                      00013                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
                      00014                         BCF     STATUS,RP1      ; de memoria de programa de 2K
                      00015                         ENDM                            ; PCL tiene 11 bits para direccionar la memoria 
                            de programa, 2^11 = 2048 
                      00016 BANCO1          MACRO                           ; Cuando se hace una instruccion CALL o GOTO, los dos bi
                            ts mas signifitivos de la direccion son entregados 
                      00017                         BSF     STATUS,RP0      ; por PCLATH<4:3>
                      00018                         BCF     STATUS,RP1      ; Cuando se hace una instruccion CALL o GOTO, el usuario
                             debe asegurar que los bits seleccionados de la pagina
                      00019                         ENDM                            ; son programados, asi la pagina de la memoria d
                            e programa deseada es direccionada.
                      00020 BANCO2          MACRO                           ; si un retorno de una instruccion CALL (o interrupcion 
                            ) es ejecutada. Los 13 bits del PC son POPPED OFF
                      00021                         BCF     STATUS,RP0      ; de la pila. Por lo tanto, la manipulacion de los bits 
                            PCLATH<4:3> no son requeridas por la instruccion RETURN
                      00022                         BSF     STATUS,RP1      ; (el cual POPS la direccion desde la pila)
                      00023                         ENDM                                    
                      00024 BANCO3          MACRO                           ; OJO: el contenido del registro PCLATH se mantiene sin 
                            cambios despues de una instruccion RETURN, RETFIE
                      00025                         BSF     STATUS,RP0      ; ejecutada. El usuario debe reescribir el contenido de 
                            el registro PCLATH para alguna subsecuente llamada
                      00026                         BSF     STATUS,RP1      ; de subrutina o instruccion GOTO.
                      00027                         ENDM
                      00028 ;*******************************************************************************************************
                            *********************************************************
  00000024            00029 UNI                             equ     24h     ; RECORDATORIO DE EN DONDE SE ENCUENGRAN ALGUNOS REGISTR
                            OS 
  00000025            00030 DECE                    equ     25h     ;       ADRESH  1Eh             banco 0
  00000026            00031 SP                              equ     26h     ;       ADRESL  9Eh             banco 1
  00000027            00032 uni_comodin             equ     27h     ;       ANSEL           9Bh             banco 1
  00000028            00033 dece_comodin    equ     28h     ;       ADCON0  1Fh             banco 0
  00000029            00034 STATUS_TEMP     equ 29h ;       ADCON1  9Fh             banco 1
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000002A            00035 PCLATH_TEMP     equ 2Ah ;****************************************************************
  0000002B            00036 W_TEMP          equ     2Bh
                      00037 ;**************************************************
  0000002C            00038 BINARIO                 equ     2Ch
  0000002D            00039 CONTADOR1       equ 2Dh
  0000002E            00040 CONTADOR2       equ 2Eh
  0000002F            00041 CONTADOR3       equ 2Fh
                      00042 ;********************** 
  00000030            00043 BCDH                    equ 30h
  00000031            00044 BCDL                    equ 31h
  00000032            00045 BCD_TEMP                equ 32h
                      00046 
  00000034            00047 BIN                             equ 34h
  00000035            00048 BIN_comodin             equ 35h
  00000036            00049 T_ADQ                   equ 36h
                      00050 ;*************************************************
  00000037            00051 SEIS_CERO               equ     37h
  00000038            00052 NUEVE_NUEVE     equ  38h
                      00053 ;***************************************************************
  00000039            00054 DECE_com                equ     39h
                      00055 ;CUENTASP1      equ 3Ah
                      00056 ;CUENTASP2      equ 3Bh
                      00057 ;CUENTASP3      equ 3Ch
                      00058 ;CUENTASP4      equ 3Dh
  0000003E            00059 REG_REBOTE1     equ 3Eh
  0000003F            00060 REG_REBOTE2     equ     3Fh
  00000040            00061 RETARDO_PULSO           equ     40h
  00000042            00062 RETARDO_PULSO_com       equ 42h
  00000043            00063 VECES_MISMO_RET         equ 43h
  00000044            00064 CUENTA                          equ 44h
  00000033            00065 CUENTA100                               equ 33h
  00000041            00066 CONTADOR_D_PULS equ 41h
  00000042            00067 COM                                     equ 42h   
  00000043            00068 CUENTA100_com           equ 43h
                      00069 ;***************************************************************
  00000045            00070 CUENTASP1       equ 45h
  00000046            00071 CUENTASP2       equ 46h
  00000047            00072 CUENTASP3       equ 47h
  00000048            00073 CUENTASP4       equ 48h
  00000049            00074 PORTA_com               equ     49h
  0000004A            00075 PORTB_com               equ     4Ah
  0000004B            00076 UNI_com         equ     4Bh
                      00077 ;------------------------------------
  0000004C            00078 BINARIO_SP              equ     4Ch
  0000004D            00079 DATO_VELOC      equ     4Dh
  0000004E            00080 CICLOS60                equ 4Eh
  0000004F            00081 MODO_OPERACION  equ 4Fh
  00000050            00082 VECES120                equ     50
                      00083 ;#######################################################################################################
                            ############################
0000                  00084                         ORG             0x00                                    ;#######################
                            #####################################################;##########################################
0000   2805           00085                         GOTO            INICIO                                  ;#######################
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            #####################################################;##########################################
0004                  00086                         ORG             0x04                                    ;#######################
                            #####################################################;##########################################
0004   2900           00087                         GOTO            SP_INTERRUPT                    ;###############################
                            #############################################;##################################################
                      00088 ;#######################################################################################################
                            ############################
0005                  00089                         ORG             0x05                                    ;#######################
                            #####################################################;##########################################
0005   2265           00090 INICIO          CALL            limpia_registros                        ;###############################
                            #############################################;##################################################
0006   227E           00091                         CALL            configura_oscilador             ;###############################
                            #############################################
                      00092                         ;CALL           configura_TMR0                  ;###############################
                            #############################################
                      00093                         ;CALL           configura_comparadores  ;#######################################
                            #####################################
0007   2283           00094                         CALL            configura_puertos                       ;#######################
                            #####################################################
                      00095                         ;CALL           configura_convertidor           ;###############################
                            #############################################
0008   228A           00096                         CALL            configura_interrupciones        ;###############################
                            #############################################
                      00097 ;=======================================================================================================
                            ============                                    
                      00098                                         ;=========  PROGRAMA PRINCIPAL -  ==============================
                            ====================================
0009                  00099 INICIO1                         ;
0009   1C4F           00100 LEE_MODO                        BTFSS           MODO_OPERACION,0                ; LEE MODO DE OPERACION
000A   280F           00101                                         GOTO            ACCIONA_CONTROL                                 
                                    
000B   280C           00102                                         GOTO            LEE_TEMP
000C   2257           00103 LEE_TEMP                        CALL            LEER_TEMP_ACTUAL                ; MODO EN REPOSO (DESPLI
                            EGA TEMP ACTUAL)
000D   2259           00104                                         CALL            DESPLEGAR_TEMP_ACTUAL; MODO EN REPOSO (DESPLIEGA
                             TEMP ACTUAL)
000E   2809           00105                                         GOTO            LEE_MODO                                        
                                    ;  MODO EN REPOSO (DESPLIEGA TEMP ACTUAL)
                      00106 ;=======================================================================================================
                            ===========                             
Error[113]  : Symbol not previously defined (LEE_TEMP_ACTUAL)
000F   2000           00107 ACCIONA_CONTROL CALL            LEE_TEMP_ACTUAL                 ; MODO ACCION DE CONTROL (CONTROLA LA TE
                            MP)
0010   2259           00108                                         CALL            DESPLEGAR_TEMP_ACTUAL; DESPLIEGA LA TEMPERATURA 
                            ACTUAL 
Error[108]  : Illegal character (,)
0010   2259           00109                                         ,===============================================================
                            =================================
Error[113]  : Symbol not previously defined (ERROR_DE_TEMP1)
0011   2000           00110                                         CALL            ERROR_DE_TEMP1                  ; CALCULA EL ERR
                            OR DE LA TEMP (TEMP_DESEADA-TEMP_ACTUAL)
                      00111                                         
                      00112                                         ;---------------------------------------------------------------
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            -|      LOS DOS DATOS ANTERIORES ENTRAN EN LA MAQUINA DE INFERENCIA
0012   2261           00113                                         CALL            MAQUINA_DE_INFERENCIA   ;|      REALIZANDO EL PR
                            OCESO DE INFERIR LA SALIDA DESEADA
                      00114                                         ;---------------------------------------------------------------
                            -|      
                      00115                                         ;===============================================================
                            ==================================
Error[113]  : Symbol not previously defined (ALFA)
0013   0800           00116                                         MOVF            ALFA,0                                          
                            ;mueve al registro W el valor de ALFA (RETARDO)
Error[113]  : Symbol not previously defined (ALFA_A_ENVIAR)
0014   0080           00117                                         MOVWF           ALFA_A_ENVIAR                   ;carga w al regi
                            stro ALFA_A_ENVIAR
                      00118                                         ;===============================================================
                            ======================================                                                  
0015   3078           00119                                         MOVLW           H'78'                                           
                                    ; si lo hace 120 veces, entonces ha transcurrido 1 [s] ---> 83.33 [micro s] x 120 = 1 [s
0016   00D0           00120                                         MOVWF           VECES120                                        
                            ; y sensa cada 1 [s]
                      00121                                         ;===============================================================
                            ======================================                                                          
Error[113]  : Symbol not previously defined (BTFSC)
0017   1B80           00122 DETECTA_CRUCE   BTFSC           BTFSC,7                                 ; DETECTA EL CRUCE POR CERO
0018   2817           00123                                         GOTO            DETECTA_CRUCE                   ; DETECTA EL CRU
                            CE POR CERO
                      00124                                         ;===============================================================
                            ===================================                                     
0019   2263           00125                                         CALL            ENVIA_ALFA                              ; ENVIA 
                            EL RETRASO DEL PULSO PARA ACCIONAR EL SCR Y POR LO TANTO LA POTENCIA
                      00126                                         ;===============================================================
                            ===================================
Message[305]: Using default destination of 1 (file).
001A   0BD0           00127                                         DECFSZ  VECES120
001B   2817           00128                                         GOTO            DETECTA_CRUCE
                      00129                                         ;===============================================================
                            ===================================
Error[113]  : Symbol not previously defined (CALC_dT_dt)
001C   2000           00130                                         CALL            CALC_dT_dt                                      
                            ; CALCULA LA RAPIDEZ DE VARIACION DE LA TEMPERATURA
001D   280F           00131                                         GOTO            ACCIONA_CONTROL                 ;SE SALE DEL CIC
                            LO DESPUES DE UN SEGUNDO 
                      00132 
                      00133 ;{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{  SUBRUTINA DE INTERR
                            UPCION }}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}
0100                  00134                                 ORG             0x100
                      00135 ;#######################################################################################################
                            ##################
0100   00AB           00136 SP_INTERRUPT    MOVWF   W_TEMP          ;Copy W to TEMP register                                        
                                                    ;codigo propuesto por hoja de especificaciones
0101   0E03           00137                                 SWAPF           STATUS,0                ;Swap status to be saved into W 
                                                                            ;codigo propuesto por hoja de especificaciones
0102   0183           00138                                 CLRF            STATUS          ;bank 0, regardless of current bank, Cle
                            ars IRP,RP1,RP0 ;codigo propuesto por hoja de especificaciones
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0103   00A9           00139                                 MOVWF   STATUS_TEMP     ;Save status to bank zero STATUS_TEMP register  
                                            ;codigo propuesto por hoja de especificaciones
                      00140                                 ;MOVF           PCL,0                   ;Only required if using page 1  
                                                                            ;codigo propuesto por hoja de especificaciones
                      00141                                 ;MOVWF  PCLATH_TEMP     ;Save PCLATH into W                             
                                                                    ;codigo propuesto por hoja de especificaciones
                      00142                                 ;CLRF           PCL                     ;Page zero, regardless of curren
                            t page                                  ;codigo propuesto por hoja de especificaciones
                      00143                                 ; ================================================
0104   01CA           00144 INICIA_SP               CLRF            PORTB_com               ;INICIALIZA REGISTROS IMPORTANTES
0105   1305           00145                                 BCF             PORTA,6         ;INICIALIZA REGISTROS IMPORTANTES
0106   1349           00146                                 BCF             PORTA_com,6     ;INICIALIZA REGISTROS IMPORTANTES
0107   3009           00147                                 MOVLW           H'09'                   ;INICIALIZA REGISTROS IMPORTANTE
                            S
0108   00A4           00148                                 MOVWF           UNI                             ;INICIALIZA REGISTROS IM
                            PORTANTES
0109   00A5           00149                                 MOVWF           DECE                    ;INICIALIZA REGISTROJS IMPORTANT
                            ES
                      00150                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
010A   2290           00151                                 CALL            desplegar_u_bcd ;DESPLIEGA VALOR INICIAL EN EL DISPLAY  
010B   229D           00152                                 CALL            desplegar_d_bcd ;DESPLIEGA VALOR INICIAL EN EL DISPLAY
                      00153                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
                      00154                                 ;GOTO           HASTAELFINAL
                      00155                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
010C   30FF           00156 OTRA_VEZ                MOVLW           H'FF'                                           ;(1)
010D   00C5           00157                                 MOVWF           CUENTASP1                               ;(1)
010E   30FF           00158                                 MOVLW           H'FF'                                           ;(1)
010F   00C6           00159                                 MOVWF           CUENTASP2                               ;(1)
0110   3009           00160                                 MOVLW           H'09'                                           ;(1)    
                            carga un  decimal
0111   00C7           00161                                 MOVWF           CUENTASP3                               ;(1)  255x255x(9
                             ciclos de instruccion)x9x1 micro sec = 5.26 [s]
                      00162                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
                      00163                                 ;GOTO           HASTAELFINAL
                      00164 ;-------------------------------------------------------------------------------------------------------
                            -------------------------------------------------------------------------
0112   1C05           00165 REVISA_U                BTFSS           PORTA,0                         ;(1)                    ; REVISA
                             SI PRESIONASTE U
0113   2917           00166                                 GOTO            REVISA_D                                ;(2)            
                                    ; REVISA SI PRESIONASTE U       
                      00167                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0114   240B           00168                                 CALL            t250_ms                                 ; REBOTE
0115   2200           00169                                 CALL            configura_unidades                      
0116   290C           00170                                 GOTO            OTRA_VEZ
                      00171                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0117   1E85           00172 REVISA_D                BTFSS           PORTA,5                         ;(1)                    ;REVISA 
                            SI PRESIONASTE D        
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0118   291C           00173                                 GOTO            QUITA_TIEMPO                    ;(2)                    
                            ;REVISA SI PRESIONASTE D
                      00174                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0119   240B           00175                                 CALL            t250_ms                                 ; REBOTE
011A   221C           00176                                 CALL            configura_decenas
011B   290C           00177                                 GOTO            OTRA_VEZ
                      00178                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
011C   0BC5           00179 QUITA_TIEMPO    DECFSZ  CUENTASP1,1                     ;(1)
011D   2912           00180                                 GOTO            REVISA_U                                ;(2)
                      00181 ;-------------------------------------------------------------------------------------------------------
                            -----------------------------------------------------------------------------
011E   0BC6           00182                                 DECFSZ  CUENTASP2,1                     ;(1)
011F   2912           00183                                 GOTO            REVISA_U                                ;(2)
0120   0BC7           00184                                 DECFSZ  CUENTASP3,1                     ;(1)
0121   2912           00185                                 GOTO            REVISA_U                                ;(2)
                      00186                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
                      00187 ACCION_out              BANCO0
0122   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
0123   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
0124   3005           00188                                 MOVLW           H'05'                   ; PARA DESPLEGAR 6 VECES EL NUME
                            RO ESTABLECIDO 
0125   00C5           00189                                 MOVWF           CUENTASP1       ; PARA DESPLEGAR 6 VECES EL NUMERO ESTAB
                            LECIDO 
                      00190                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0126   2290           00191 CIRCULO_SP      CALL            desplegar_u_bcd  ;despliega UNI
0127   229D           00192                                 CALL            desplegar_d_bcd ; despliega DECE
0128   2400           00193                                 CALL            tmedio_s                ; RETARDO DE MEDIO SEGUNDO
0129   30FF           00194                                 MOVLW           H'FF'                   ; despliega NADA 
012A   0086           00195                                 MOVWF           PORTB                   ; despliega NADA 
012B   1705           00196                                 BSF             PORTA,6         ; despliega NADA 
012C   2400           00197                                 CALL            tmedio_s                ; RETARDO DE MEDIO SEGUNDO
012D   0BC5           00198                                 DECFSZ  CUENTASP1,1     ;                       
012E   2926           00199                                 GOTO            CIRCULO_SP      
                      00200                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
012F   22AB           00201 HASTAELFINAL    CALL            BCD_BINARIO             ; llama a la subrutina de conversion de BCD A BI
                            NARIO
                      00202                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
                      00203                                 ; ========== RECUPERACION DE REGISTROS IMPORTANTES =====================
                            ================================
                      00204                                 ;MOVF           PCLATH_TEMP,0           ;Restore PCLATH                 
                                                    ;codigo propuesto por hoja de especificaciones
                      00205                                 ;MOVWF  PCL                                     ;Move W into PCLATH     
                                                            ;codigo propuesto por hoja de especificaciones
0130   0E29           00206 SIGUEPROG               SWAPF           STATUS_TEMP,0           ;Swap STATUS_TEMP register into W       
                            ;codigo propuesto por hoja de especificaciones
                      00207                                                                                                         
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ;(sets bank to original state)                                  ;codigo propuesto por hoja de es
0131   0083           00208                                 MOVWF   STATUS                          ;Move W into STATUS register    
                                            ;codigo propuesto por hoja de especificaciones
0132   0EAB           00209                                 SWAPF           W_TEMP,1                                ;Swap W_TEMP    
                                                                    ;codigo propuesto por hoja de especificaciones
0133   0E2B           00210                                 SWAPF           W_TEMP,0                                ;Swap W_TEMP int
                            o W                             ;codigo propuesto por hoja de especificaciones
                      00211                                 ;=======================================================================
                            ===================================
                      00212                                 BANCO0
0134   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
0135   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
0136   108B           00213                                 BCF             INTCON,1                                ;limpia bandera 
                            de interrupcion RB0                                             
0137   0009           00214                                 RETFIE                                                          ;regresa
                             de la interrupcion
                      00215 ;}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}} TERMINA SUBRUTINA DE INTERRU
                            PCION }}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}
                      00216 
                      00217 ;#############SUBRUTINAS DE RETRASO DE TIEMPO###########################################################
                            #######################################
0400                  00218                                                 ORG             0x400                           ; 1024 d
                            ecimal
                      00219 ;#######################################################################################################
                            ############
0400   2411           00220 tmedio_s                CALL            t50msTMR0
0401   2411           00221                                 CALL            t50msTMR0                       ;100 ms
0402   2411           00222                                 CALL            t50msTMR0
0403   2411           00223                                 CALL            t50msTMR0                       ;200 ms
0404   2411           00224                                 CALL            t50msTMR0
0405   2411           00225                                 CALL            t50msTMR0                       ; 300 ms
0406   2411           00226                                 CALL            t50msTMR0
0407   2411           00227                                 CALL            t50msTMR0                       ; 400 ms 
0408   2411           00228                                 CALL            t50msTMR0
0409   2411           00229                                 CALL            t50msTMR0                       ; 500 ms
040A   0008           00230                                 RETURN
                      00231 ;#######################################################################################################
                            #################
040B   2411           00232 t250_ms                 CALL            t50msTMR0
040C   2411           00233                                 CALL            t50msTMR0                       ;100 ms
040D   2411           00234                                 CALL            t50msTMR0
040E   2411           00235                                 CALL            t50msTMR0                       ;200 ms
040F   2411           00236                                 CALL            t50msTMR0                       ;250 ms
0410   0008           00237                                 RETURN
                      00238 ;#######################################################################################################
                            ##############################
                      00239 t50msTMR0                               BANCO1
0411   1683               M                         BSF     STATUS,RP0      ; por PCLATH<4:3>
0412   1303               M                         BCF     STATUS,RP1      ; Cuando se hace una instruccion CALL o GOTO, el usuario
                             debe asegurar que los bits seleccionados de la pagina
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0413   1281           00240                                                 BCF             OPTION_REG,5            ; 0 = Internal i
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            nstruction cycle clock (CLKO)   |
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0414   1181           00241                                                 BCF             OPTION_REG,3            ; 0= pre scaler 
                            asignado al TMR0                        |       
                      00242                                                 ;-------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0415   1501           00243                                                 BSF             OPTION_REG,2            ; PS<2:0>: Presc
                            aler Rate Select bits           | QUITAR contar estos microsegundos
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0416   1481           00244                                                 BSF             OPTION_REG,1            ; 111           
                            1:256                                           | en el retardo
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0417   1401           00245                                                 BSF             OPTION_REG,0            ; preescalador a
                             256                                            |
                      00246                                                 ;-------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
                      00247                                                 BANCO0
0418   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
0419   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
041A   303C           00248 PRECARGA                                MOVLW            H'3C'                  ; 50ms -->
041B   0081           00249                                                 MOVWF           TMR0                    ;       TMR0 =  
                            [255 - {(fxt)(temporizacion deseada)}/(4*divisor de frecuencia)]
041C   1D0B           00250 AGUANTAretraso50ms      BTFSS           INTCON,T0IF
041D   2C1C           00251                                                 GOTO            AGUANTAretraso50ms
041E   110B           00252                                                 BCF             INTCON,T0IF             ; limpiar bander
                            a 
041F   0008           00253                                                 RETURN                                  ;Cuando se carga
                             un valor en el registro TMR0 (se escribe mediante una
                      00254                                                                                                         
                            ;instrucción), se produce un retardo de dos ciclos de instrucción durante los
                      00255                                                                                                         
                            ;cuales se inhibe tanto el prescaler como TMR0. Será necesario tener en cuenta
                      00256                                                                                                         
                            ;esa inhibición temporal a la hora de realizar una precarga (compensar sumando
                      00257                                                                                                         
                            ;los ciclos de instrucción que “se pierden”)
                      00258 ;#######################################################################################################
                            ################
0420                  00259 t_20micros
                      00260 t_adq_20micros                  BANCO0                                  ;selecciona banco 0
0420   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
0421   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
0422   3006           00261                                                 MOVLW           H'06'                   ; (1) ciclo de i
                            nstruccion
0423   00B6           00262                                                 MOVWF           T_ADQ                   ; (1)
0424   0BB6           00263 esp_t_adq                               DECFSZ  T_ADQ,1         ; (1)           el decremento lo pone en
                             el mismo registro
0425   2C24           00264                                                 GOTO            esp_t_adq               ; (2)           
                                                    
0426   0008           00265                                                 RETURN                                  ; (2)           
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            20-4=16;          (3 ciclos)x(6)=18,         en realidad serian como 22 microsegundos
                      00266 ;#######################################################################################################
                            #########
                      00267 t1_ms                                   BANCO1                                  ; (2) CALL 
0427   1683               M                         BSF     STATUS,RP0      ; por PCLATH<4:3>
0428   1303               M                         BCF     STATUS,RP1      ; Cuando se hace una instruccion CALL o GOTO, el usuario
                             debe asegurar que los bits seleccionados de la pagina
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0429   1281           00268                                                 BCF             OPTION_REG,5    ;(1)    ; 0 = Internal i
                            nstruction cycle clock (CLKO)   |
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
042A   1181           00269                                                 BCF             OPTION_REG,3    ;(1)    ; 0= pre scaler 
                            asignado al TMR0                        |       
                      00270                                                 ;-------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
042B   1501           00271                                                 BSF             OPTION_REG,2    ;(1)    ; PS<2:0>: Presc
                            aler Rate Select bits           | QUITAR contar estos microsegundos
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
042C   1481           00272                                                 BSF             OPTION_REG,1    ;(1)    ; 111           
                            1:256                                           | en el retardo
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
042D   1401           00273                                                 BSF             OPTION_REG,0    ;(1)    ; preescalador a
                             256                                            |
                      00274                                                 ;-------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
                      00275                                                 BANCO0
042E   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
042F   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
0430   30FB           00276 PRECARGA_un_ms          MOVLW            H'FB'                  ;(1)    ; 
0431   0081           00277                                                 MOVWF           TMR0                    ;(1)    ;       
                            TMR0 =  [255 - {(fxt)(temporizacion deseada)}/(4*divisor de frecuencia)]
0432   1D0B           00278 AGUANTA_un_ms           BTFSS           INTCON,T0IF             ;(2) ;          TMR0 =  [255 - {(4MHz)(1
                            ms)}/(4*256)]= 255 - 3.9 = 255-4 = 251d=FB
0433   2C32           00279                                                 GOTO            AGUANTA_un_ms           ;(2)
0434   110B           00280                                                 BCF             INTCON,T0IF             ;(1)    ; limpia
                            r bandera 
0435   0008           00281                                                 RETURN                                  ;(2)
                      00282                                                                                                         
                            ;Cuando se carga un valor en el registro TMR0 (se escribe mediante una
                      00283                                                                                                         
                            ;instrucción), se produce un retardo de dos ciclos de instrucción durante los
                      00284                                                                                                         
                            ;cuales se inhibe tanto el prescaler como TMR0. Será necesario tener en cuenta
                      00285                                                                                                         
                            ;esa inhibición temporal a la hora de realizar una precarga (compensar sumando
                      00286                                                                                                         
                            ;los ciclos de instrucción que “se pierden”)
                      00287 ;#######################################################################################################
                            ########
                      00288 t4_ms                                   BANCO1                                  ; (2) CALL 
0436   1683               M                         BSF     STATUS,RP0      ; por PCLATH<4:3>
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0437   1303               M                         BCF     STATUS,RP1      ; Cuando se hace una instruccion CALL o GOTO, el usuario
                             debe asegurar que los bits seleccionados de la pagina
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0438   1281           00289                                                 BCF             OPTION_REG,5    ;(1)    ; 0 = Internal i
                            nstruction cycle clock (CLKO)   |
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0439   1181           00290                                                 BCF             OPTION_REG,3    ;(1)    ; 0= pre scaler 
                            asignado al TMR0                        |       
                      00291                                                 ;-------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
043A   1501           00292                                                 BSF             OPTION_REG,2    ;(1)    ; PS<2:0>: Presc
                            aler Rate Select bits           | QUITAR contar estos microsegundos
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
043B   1481           00293                                                 BSF             OPTION_REG,1    ;(1)    ; 111           
                            1:256                                           | en el retardo
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
043C   1401           00294                                                 BSF             OPTION_REG,0    ;(1)    ; preescalador a
                             256                                            |
                      00295                                                 ;-------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
                      00296                                                 BANCO0
043D   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
043E   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
043F   30EF           00297 PRECARGA_4_ms           MOVLW            H'EF'                  ;(1)    ; 
0440   0081           00298                                                 MOVWF           TMR0                    ;(1)    ;       
                            TMR0 =  [255 - {(fxt)(temporizacion deseada)}/(4*divisor de frecuencia)]
0441   1D0B           00299 AGUANTA_4_ms                    BTFSS           INTCON,T0IF             ;(2) ;          TMR0 =  [255 - {
                            (4MHz)(4ms)}/(4*256)]= 255 - 15.625 = 255-16 = 239d=EFh
0442   2C41           00300                                                 GOTO            AGUANTA_4_ms            ;(2)
0443   110B           00301                                                 BCF             INTCON,T0IF             ;(1)    ; limpia
                            r bandera 
0444   0008           00302                                                 RETURN                                  ;(2)
                      00303                                                                                                         
                            ;Cuando se carga un valor en el registro TMR0 (se escribe mediante una
                      00304                                                                                                         
                            ;instrucción), se produce un retardo de dos ciclos de instrucción durante los
                      00305                                                                                                         
                            ;cuales se inhibe tanto el prescaler como TMR0. Será necesario tener en cuenta
                      00306                                                                                                         
                            ;esa inhibición temporal a la hora de realizar una precarga (compensar sumando
                      00307                                                                                                         
                            ;los ciclos de instrucción que “se pierden”)
                      00308 ;#######################################################################################################
                            ########
                      00309 t100_micros             BANCO0                                  ;selecciona banco 0
0445   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
0446   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
0447   3020           00310                                 MOVLW           H'20'                   ; (1) ciclo de instruccion
0448   00B6           00311                                 MOVWF           T_ADQ                   ; (1)
0449   0BB6           00312 esp_100micros   DECFSZ  T_ADQ,1         ; (1)           el decremento lo pone en el mismo registro
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

044A   2C49           00313                                 GOTO            esp_100micros   ; (2)                                   
044B   0008           00314                                 RETURN                                  ; (2)           100-4=96;       
                              (3 ciclos)x(32)=96            32d=20h
                      00315 ;#######################################################################################################
                            ########
                      00316 t250_micros             BANCO0                                  ;selecciona banco 0
044C   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
044D   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
044E   3052           00317                                 MOVLW           H'52'                   ; (1) ciclo de instruccion
044F   00B6           00318                                 MOVWF           T_ADQ                   ; (1)
0450   0BB6           00319 esp_t250_micros DECFSZ  T_ADQ,1         ; (1)           el decremento lo pone en el mismo registro
0451   2C50           00320                                 GOTO            esp_t250_micros ; (2)                                   
0452   0008           00321                                 RETURN                                  ; (2)           250-4=246;      
                              (3 ciclos)x(82)=246;  82d=52h
                      00322 ;#######################################################################################################
                            ########
                      00323 t600_micros             BANCO0                                  ;  selecciona banco 0
0453   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
0454   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
0455   30C7           00324                                 MOVLW           H'C7'                   ; (1) ciclo de instruccion
0456   00B6           00325                                 MOVWF           T_ADQ                   ; (1)
0457   0BB6           00326 esp_t600_micros DECFSZ  T_ADQ,1         ; (1)           el decremento lo pone en el mismo registro
0458   2C57           00327                                 GOTO            esp_t600_micros ; (2)                                   
0459   0008           00328                                 RETURN                                  ; (2)           600-4=596;      
                              (3 ciclos)x()=496;    199d=C7h
                      00329 ;#######################################################################################################
                            ########
                      00330 t500_micros             BANCO0                                  ;  selecciona banco 0
045A   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
045B   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
045C   30A5           00331                                 MOVLW           H'A5'                   ; (1) ciclo de instruccion
045D   00B6           00332                                 MOVWF           T_ADQ                   ; (1)
045E   0BB6           00333 esp_t500_micros DECFSZ  T_ADQ,1         ; (1)           el decremento lo pone en el mismo registro
045F   2C5E           00334                                 GOTO            esp_t500_micros ; (2)                                   
0460   0008           00335                                 RETURN                                  ; (2)           500-4=496;      
                              (3 ciclos)x()=496;    165d=A5h
                      00336 ;#######################################################################################################
                            ########
                      00337 t83_micros              BANCO0                                  ; selecciona banco 0
0461   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
0462   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
0463   301A           00338                                 MOVLW           H'1A'                   ; (1) ciclo de instruccion
0464   00B6           00339                                 MOVWF           T_ADQ                   ; (1)
0465   0BB6           00340 esp_83micros    DECFSZ  T_ADQ,1         ; (1)           el decremento lo pone en el mismo registro
0466   2C65           00341                                 GOTO            esp_83micros    ; (2)                                   
0467   0008           00342                                 RETURN                                  ; (2)           83-4=79;        
                              (3 ciclos)x()=26.3333         26d=1Ah
                      00343 ;######################SUBRUTINAS DE CONFIGURACION DE REGISTROS Y PERIFERICOS ##########################
                            #########################################################################
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0200                  00344                                         ORG             0x200
                      00345 ;#######################################################################################################
                            ############
                      00346 ;---------------------------------------------------- subrutina que configura unidades -----------------
                            ------------------------------------------------------------------------------------------------
                      00347 configura_unidades      BANCO0
0200   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
0201   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
                      00348                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0202   1103           00349                                         BCF             STATUS,2                ; limpia registro Z
0203   3000           00350                                         MOVLW           H'00'                   
0204   00CB           00351                                         MOVWF           UNI_com         ; inicializa el registro UNI_com
                             a CERO
0205   0824           00352                                         MOVF            UNI,0                           ;mueve el regist
                            ro UNI a W
0206   02CB           00353                                         SUBWF           UNI_com,1               ; resultado en registro 
                            (DECE_com - 0)= 0
0207   1D03           00354                                         BTFSS           STATUS,2                ; salta si hay un 1 en l
                            a bandera Z
0208   2A0A           00355                                         GOTO            uni_no_es_cero
0209   2A0D           00356                                         GOTO            si_es_cero_uni                                  
                      00357                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
020A   0BA4           00358 uni_no_es_cero          DECFSZ  UNI,1
020B   2A15           00359                                         GOTO            sigue_despleg_u
020C   2A11           00360                                         GOTO            despliega_cero_u
                      00361                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
020D   3009           00362 si_es_cero_uni          MOVLW           H'09'
020E   00A4           00363                                         MOVWF           UNI
020F   2290           00364                                         CALL            desplegar_u_bcd
0210   2A33           00365                                         GOTO            si_sigue_opr
                      00366                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0211   3000           00367 despliega_cero_u                MOVLW           H'00'
0212   00A4           00368                                         MOVWF           UNI
0213   2290           00369                                         CALL            desplegar_u_bcd
0214   2A17           00370                                         GOTO            si_sigue_opr_u
                      00371                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0215   2290           00372 sigue_despleg_u         CALL            desplegar_u_bcd
0216   2A17           00373                                         GOTO            si_sigue_opr_u
                      00374                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0217   2400           00375 si_sigue_opr_u          CALL            tmedio_s
0218   1805           00376                                         BTFSC           PORTA,0
0219   2A00           00377                                         GOTO            configura_unidades
021A   2A1B           00378                                         GOTO            TERMINA_C_U
                      00379                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
021B   0008           00380 TERMINA_C_U             RETURN
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00381 ;#######################################################################################################
                            ############
                      00382 ;------------------------------------------------------------------ subrutina que configura decenas ----
                            ----------------------------------------------
                      00383 configura_decenas       BANCO0
021C   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
021D   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
                      00384                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
021E   1103           00385                                         BCF             STATUS,2
021F   3000           00386                                         MOVLW           H'00'
0220   00B9           00387                                         MOVWF           DECE_com
0221   0825           00388                                         MOVF            DECE,0                          ;mueve el regist
                            ro UNI a W
0222   02B9           00389                                         SUBWF           DECE_com,1              ; resultado en registro 
                            (DECE_com - 0)=
0223   1D03           00390                                         BTFSS           STATUS,2                        ; salta si hay u
                            n 1 en la bandera Z
0224   2A26           00391                                         GOTO            dece_no_es_cero
0225   2A29           00392                                         GOTO            si_es_cero                                      
                      00393                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0226   0BA5           00394 dece_no_es_cero         DECFSZ  DECE,1
0227   2A31           00395                                         GOTO            sigue_despleg
0228   2A2D           00396                                         GOTO            despliega_cero
                      00397                                         ;;--------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0229   3009           00398 si_es_cero                      MOVLW           H'09'
022A   00A5           00399                                         MOVWF           DECE
022B   229D           00400                                         CALL            desplegar_d_bcd
022C   2A33           00401                                         GOTO            si_sigue_opr
                      00402                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
022D   3000           00403 despliega_cero          MOVLW           H'00'
022E   00A5           00404                                         MOVWF           DECE
022F   229D           00405                                         CALL            desplegar_d_bcd
0230   2A33           00406                                         GOTO            si_sigue_opr
                      00407                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0231   229D           00408 sigue_despleg           CALL            desplegar_d_bcd
0232   2A33           00409                                         GOTO            si_sigue_opr
                      00410                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0233   2400           00411 si_sigue_opr                    CALL            tmedio_s
0234   1A85           00412                                         BTFSC           PORTA,5
0235   2A1C           00413                                         GOTO            configura_decenas
0236   2A37           00414                                         GOTO            TERMINA_C_D
                      00415                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0237   0008           00416 TERMINA_C_D             RETURN
                      00417 ;#######################################################################################################
                            ############
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00418 ENCIENDE_MOTOR  BANCO0
0238   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
0239   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
023A   01C1           00419                                         CLRF            CONTADOR_D_PULS
023B   3058           00420                                         MOVLW           H'58'                                           
                            ; 88 decimal = 58h
023C   00B3           00421                                         MOVWF           CUENTA100
                      00422                                         
023D   3058           00423                                         MOVLW           H'58'                                           
                            ; 60 decimal                            ; dice cuantas veces hara el mismo retardo      
023E   00CE           00424                                         MOVWF           CICLOS60
                      00425                                         
023F   1B85           00426 REVISA_CRUCEx0  BTFSC           PORTA,7                         ; monitorea el pulso de cruce por cero
0240   2A3F           00427                                         GOTO            REVISA_CRUCEx0          ; monitorea el pulso de 
                            cruce por cero
0241   1205           00428                                         BCF             PORTA,4
                      00429                                         
0242   0833           00430                                         MOVF            CUENTA100,0                     ; la primera vez
                             mueve un 88 al registro W
0243   00C0           00431                                         MOVWF           RETARDO_PULSO           ; mueve el 88 al registr
                            o RETARDO de PULSO
0244   2461           00432 HAZ                                     CALL            t83_micros                      
0245   0BC0           00433                                         DECFSZ  RETARDO_PULSO,1         ; decrementa el registro y almac
                            enalo en el mismo       
0246   2A44           00434                                         GOTO            HAZ
Message[305]: Using default destination of 1 (file).
0247   0AC1           00435                                         INCF            CONTADOR_D_PULS                                 
                                                                                                    ; 8.333 [ms]/100 = 83.33
                      00436 
0248   1605           00437                                         BSF             PORTA,4                         ; TERCERO: APARE
                            CE EL PULSO 
0249   2427           00438                                         CALL            t1_ms                                   ; CUARTO
                            : DURACION DEL PULSO DE  1 ms
024A   1205           00439                                         BCF             PORTA,4                         ; QUINTO: DESAPA
                            RECE EL PULSO, Y 
                      00440 
024B   0BCE           00441                                         DECFSZ  CICLOS60,1
024C   2A53           00442                                         GOTO            SALIR_AOTRO     
                      00443 
024D   3058           00444                                         MOVLW           H'58'
024E   00CE           00445                                         MOVWF           CICLOS60                
024F   2A50           00446                                         GOTO            DEC_CUENTA
                      00447                 
0250   0BB3           00448 DEC_CUENTA              DECFSZ  CUENTA100,1
0251   2A53           00449                                         GOTO            SALIR_AOTRO
0252   2A54           00450                                         GOTO            FINALIZA
0253   2A3F           00451 SALIR_AOTRO             GOTO            REVISA_CRUCEx0          ; SEXTO: ESPERA UN NUEVO CRUCE POR CERO
                      00452 
0254   1205           00453 FINALIZA                        BCF             PORTA,4
0255   2A54           00454                                         GOTO            FINALIZA
0256   0008           00455                                         RETURN
                      00456 ;#######################################################################################################
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ############
0257   0000           00457 LEER_TEMP_ACTUAL                        NOP
0258   0008           00458                                                                 RETURN
                      00459 ;#######################################################################################################
                            ############
0259   0000           00460 DESPLEGAR_TEMP_ACTUAL   NOP
Error[113]  : Symbol not previously defined (BIN_BCD)
025A   2000           00461                                                                 CALL    BIN_BCD ;CONVIERTE EL DATO BINAR
                            IO DE TEMPERATURA A BCD PARA DESPLEGARLO
                      00462                                                                 
                      00463                                                                 
025B   0008           00464                                                                 RETURN                                  
                                                    
                      00465 ;#######################################################################################################
                            ############
Error[113]  : Symbol not previously defined (TEMP_ACTUAL1)
025C   0800           00466 ERROR_DE_TEMP                           MOVF            TEMP_ACTUAL1,0          ;MUEVE EL DATO DE TEMPER
                            ATURA ACTUAL AL REGISTRO W
Error[113]  : Symbol not previously defined (TEMP_OBJETIVO)
025D   0200           00467                                                                 SUBWF           TEMP_OBJETIVO,0         
                            ; e1=Tobj - Tact1               error 1         ; la diferencia almacenarla en W
                      00468                                                                                                         
                                                            ; e2=Tobj - Tact2               error 2 
                      00469                                                                                                         
                                                            ; de/dt = (e2-e1)/1[segundo] 
Error[113]  : Symbol not previously defined (ERROR_TEMPi)
025E   0080           00470                                                                 MOVWF           ERROR_TEMPi             
                                    ; error de temperatura i-ésimo                                                          
025F   0008           00471                                                                 RETURN
                      00472 ;#######################################################################################################
                            ############
0260                  00473 CALC_de_dt                                              
0260   0008           00474                                                                 RETURN
                      00475 ;#######################################################################################################
                            ############
0261   0000           00476 MAQUINA_DE_INFERENCIA           NOP
0262   0008           00477                                                                 RETURN
                      00478 ;#######################################################################################################
                            ############
0263   0000           00479 ENVIA_ALFA                                      NOP
0264   0008           00480                                                                 RETURN;
                      00481 ;#######################################################################################################
                            #############
                      00482 limpia_registros                BANCO0
0265   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
0266   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
0267   0185           00483                                         CLRF            PORTA                                           
                                    ; limpia puerto A
0268   0186           00484                                         CLRF            PORTB                                           
                                    ; limpia puerto B
                      00485                                         ;***************************************************************
                            *
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0269   01A4           00486                                         CLRF            UNI                             
026A   01A5           00487                                         CLRF            DECE                    
026B   01A6           00488                                         CLRF            SP                              
026C   01A7           00489                                         CLRF            uni_comodin             
026D   01A8           00490                                         CLRF            dece_comodin    
026E   01A9           00491                                         CLRF            STATUS_TEMP     
026F   01AA           00492                                         CLRF            PCLATH_TEMP     
0270   01AB           00493                                         CLRF            W_TEMP          
                      00494                                         ;***************************************************************
                            ************************************************************************************************
0271   01AC           00495                                         CLRF            BINARIO                 
0272   01AD           00496                                         CLRF            CONTADOR1       
0273   01AE           00497                                         CLRF            CONTADOR2       
0274   01AF           00498                                         CLRF            CONTADOR3       
                      00499                                         ;********************** ******** ******** ******** ******** ****
                            **** ******** ******** ******** ******** ******** ******** 
0275   01B0           00500                                         CLRF            BCDH                    
0276   01B1           00501                                         CLRF            BCDL                    
0277   01B2           00502                                         CLRF            BCD_TEMP                
0278   01C4           00503                                         CLRF            CUENTA          
0279   01B4           00504                                         CLRF            BIN                             
027A   01B5           00505                                         CLRF            BIN_comodin                                     
                                            
                      00506                                                         
027B   01B7           00507                                         CLRF            SEIS_CERO               
027C   01B8           00508                                         CLRF            NUEVE_NUEVE
027D   0008           00509                                         RETURN
                      00510 ;#######################################################################################################
                            #########
                      00511 configura_oscilador     BANCO1                  ; selecciona Banco 1; Se encuentran registros TRISA y TR
                            ISB
027E   1683               M                         BSF     STATUS,RP0      ; por PCLATH<4:3>
027F   1303               M                         BCF     STATUS,RP1      ; Cuando se hace una instruccion CALL o GOTO, el usuario
                             debe asegurar que los bits seleccionados de la pagina
                      00512                                                                                 ; al reset STATUS=000000
                            00
                      00513                                                                                 ; REGISTRO STATUS =     
                            IRP             RP1             RP0             T0_             PD_             Z               
                      00514                                                                                 ;  RP1 RP0
                      00515                                                                                 ;  0            0       
                                    banco 0
                      00516                                                                                 ;  0            1       
                                    banco 1         RP0=1
                      00517                                                                                 ;  1            0       
                                    banco 2
                      00518                                                                                 ;  1            1       
                                    banco 3
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0280   170F           00519                                         BSF     OSCCON,6        ;Pone el oscilador a 4 MHz con el oscila
                            dor interno RC; OSCCON controla varios aspectos de operacion del sistema de reloj; Banco 1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0281   168F           00520                                         BSF     OSCCON,5        ;bit 6-4                110             
                            4 MHZ
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00521                                                                                 ;al reset inicia con 0's
                             el registro.
0282   0008           00522                                         RETURN
                      00523 ;#######################################################################################################
                            ############################
                      00524 ;##### CONFIGURA LOS PUERTOS  A y B, (A0,A1,A2,A3 = ENTRADAS)  (A4,A5,A6,A7=SALIDAS),  (B0,B1,B2,B3 = EN
                            TRADAS)  (B4,B5,B6,B7=SALIDAS) ##################
                      00525 configura_puertos       BANCO1                                  ;;Puerto A como salida          0 - sali
                            da;     1 - entrada
0283   1683               M                         BSF     STATUS,RP0      ; por PCLATH<4:3>
0284   1303               M                         BCF     STATUS,RP1      ; Cuando se hace una instruccion CALL o GOTO, el usuario
                             debe asegurar que los bits seleccionados de la pagina
0285   30AF           00526                                 MOVLW           B'10101111'             ; RA7   RA6             RA5     
                                    RA4             RA3             RA2             RA1             RA0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0286   0085           00527                                 MOVWF           TRISA                   ;    1            0             
                              1               0               1                1               1               1    
                      00528                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0287   3001           00529                                 MOVLW           B'00000001'             ; RB7   RB6             RB5     
                                    RB4             RB3             RB2             RB1             RB0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0288   0086           00530                                 MOVWF           TRISB                   ;    0            0             
                              0               0               0                0               0               1            
                      00531                                 ;-----------------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0289   0008           00532                                 RETURN
                      00533 ;########################################### CONFIGURAR INTERRUPCIONES  ################################
                            #######################
                      00534 configura_interrupciones        BANCO1
028A   1683               M                         BSF     STATUS,RP0      ; por PCLATH<4:3>
028B   1303               M                         BCF     STATUS,RP1      ; Cuando se hace una instruccion CALL o GOTO, el usuario
                             debe asegurar que los bits seleccionados de la pagina
                      00535                                                 ;-------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
028C   1301           00536                                                 BCF             OPTION_REG,INTEDG                       
                                    ; activa por flanco de bajada, bit INTEDG
                      00537                                                 ;-----------------------------------------------------  
                            HABILITACION DE INTERRUPCIONES -----------------------------------------------------------------
028D   160B           00538                                                 BSF             INTCON, INTE                            
                                                    ; que sea interrupcion externa por RB0, bit INTE bit 4
028E   178B           00539                                                 BSF             INTCON, GIE                             
                                                    ; habilitamos interrupcion global GIE bit 7
                      00540                                                                                                         
                                                                    ; INTCON TAMBIEN ESTA EN BANCO 1
028F   0008           00541                                                 RETURN
                      00542 ;#######################################################################################################
                            ####################################;################################ PARA QUE NO SE PIERDA AQUI
                      00543 desplegar_u_bcd         BANCO0
0290   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
0291   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00544                                         ;---------------------------------------------------------------
                            ----------------------------------------------------------------------------------------        
0292   30F0           00545                                         MOVLW           B'11110000'
0293   054A           00546                                         ANDWF           PORTB_com,0
0294   0424           00547                                         IORWF           UNI,0                   ; resultado en W, no alt
                            era UNI
0295   0086           00548                                         MOVWF           PORTB
0296   00CA           00549                                         MOVWF           PORTB_com
                      00550                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
0297   1C24           00551                                         BTFSS           UNI,0           ; salta si hay un '1' en el bit0
                             del registro UNI
0298   2A9B           00552                                         GOTO            pon_ceroU       ; salta a etiqueta SIGUE
0299   1705           00553                                         BSF             PORTA,6 ; pon un '1' en el pin1 del PUERTO A
029A   2A9C           00554                                         GOTO            terminaU
029B   1305           00555 pon_ceroU                       BCF             PORTA,6 ; pon un '0' en el pin1 del puerto A            
                                                    
                      00556                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
029C   0008           00557 terminaU                                RETURN                                  
                      00558         ;###############################################################################################
                            #####################################
                      00559 desplegar_d_bcd         BANCO0
029D   1283               M                         BCF     STATUS,RP0      ; las instrucciones CALL and GOTO proveen solo 11 bits d
                            e direccion para permitir saltar dentro de alguna pagina de 
029E   1303               M                         BCF     STATUS,RP1      ; de memoria de programa de 2K
029F   0825           00560                                         MOVF            DECE,0                          ; mueve el reg D
                            ECE_com al registro W
02A0   00B9           00561                                         MOVWF           DECE_com
                      00562                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
02A1   0DB9           00563                                         RLF             DECE_com,1
02A2   0DB9           00564                                         RLF             DECE_com,1
02A3   0DB9           00565                                         RLF             DECE_com,1
02A4   0DB9           00566                                         RLF             DECE_com,1
                      00567                                         ;---------------------------------------------------------------
                            ------------------------------------------------------------------------------------------------
02A5   300F           00568                                         MOVLW           B'00001111'
02A6   054A           00569                                         ANDWF           PORTB_com,0
02A7   0439           00570                                         IORWF           DECE_com,0                      ; resultado en W
                            , no altera UNI
02A8   00CA           00571                                         MOVWF           PORTB_com
02A9   0086           00572                                         MOVWF           PORTB
                      00573                                         ;---------------------------------------------------------------
                            ----------------------------------------------
02AA   0008           00574 terminaD                        RETURN                                  
                      00575 ;#######################################################################################################
                            ###################
                      00576 ;--------------- subrutina para convertir de BCD a BINARIO ----------------------------------------
02AB   0825           00577 BCD_BINARIO     MOVF            DECE,0                          ; mueve el contenido de DECE al registro
                             W
02AC   00B9           00578                                 MOVWF           DECE_com                ; mueve W al registro decenas co
                            modin                                   
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02AD   0DB9           00579                                 RLF             DECE_com,1              ; rota a la izq. el registo dece
                            _comodin y el resultado ponlo ahi mismo
02AE   0DB9           00580                                 RLF             DECE_com,1              ; rota a la izq. el registo dece
                            _comodin y el resultado
02AF   0839           00581                                 MOVF                    DECE_com,0              ; mueve dece_comodin al 
                            registro W
02B0   07A5           00582                                 ADDWF           DECE,1                          ; suma W+DECE, el result
                            ado almacenalo en DECE
02B1   0D25           00583                                 RLF             DECE,0                          ; rota a la izq. el regi
                            sto, el resultado ponlo en W
02B2   0724           00584                                 ADDWF           UNI,0                           ; suma W+UNI, el resulta
                            do almacenalo en W
02B3   00CC           00585                                 MOVWF           BINARIO_SP                              ; mueve W al reg
                            istro BINARIO
02B4   00CD           00586                                 MOVWF           DATO_VELOC
02B5   0008           00587                                 RETURN                                          ; regresa de la Subrutin
                            a
                      00588 ;#######################################################################################################
                            ##########
Error[116]  : Address label duplicated or different in second pass (LEER_TEMP_ACTUAL)
02B6   0000           00589 LEER_TEMP_ACTUAL        NOP
02B7   0008           00590                                                 RETURN
                      00591 ;#######################################################################################################
                            ###########
02B8   0000           00592 DESPLEGAR_TEMP          NOP
02B9   0008           00593                                                 RETURN
                      00594 ;$######################################################################################################
                            ###########
                      00595                                 END
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

ACCIONA_CONTROL                   0000000F
ACCION_out                        00000122
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADCS2                             00000006
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
AGUANTA_4_ms                      00000441
AGUANTA_un_ms                     00000432
AGUANTAretraso50ms                0000041C
ANSEL                             0000009B
BANCO0                            
BANCO1                            
BANCO2                            
BANCO3                            
BCDH                              00000030
BCDL                              00000031
BCD_BINARIO                       000002AB
BCD_TEMP                          00000032
BF                                00000000
BIN                               00000034
BINARIO                           0000002C
BINARIO_SP                        0000004C
BIN_comodin                       00000035
BRGH                              00000002
C                                 00000000
C1INV                             00000004
C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CALC_de_dt                        00000260
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCPR1H                            00000016
CCPR1L                            00000015
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CICLOS60                          0000004E
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

CIRCULO_SP                        00000126
CIS                               00000003
CKE                               00000006
CKP                               00000004
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             0000009C
CMIE                              00000006
CMIF                              00000006
COM                               00000042
CONTADOR1                         0000002D
CONTADOR2                         0000002E
CONTADOR3                         0000002F
CONTADOR_D_PULS                   00000041
CREN                              00000004
CSRC                              00000007
CUENTA                            00000044
CUENTA100                         00000033
CUENTA100_com                     00000043
CUENTASP1                         00000045
CUENTASP2                         00000046
CUENTASP3                         00000047
CUENTASP4                         00000048
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            0000009D
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
D                                 00000005
DATA_ADDRESS                      00000005
DATO_VELOC                        0000004D
DC                                00000001
DECE                              00000025
DECE_com                          00000039
DEC_CUENTA                        00000250
DESPLEGAR_TEMP                    000002B8
DESPLEGAR_TEMP_ACTUAL             00000259
DETECTA_CRUCE                     00000017
D_A                               00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
ENCIENDE_MOTOR                    00000238
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 22


SYMBOL TABLE
  LABEL                             VALUE 

ENVIA_ALFA                        00000263
ERROR_DE_TEMP                     0000025C
F                                 00000001
FERR                              00000002
FINALIZA                          00000254
FREE                              00000004
FSR                               00000004
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
HASTAELFINAL                      0000012F
HAZ                               00000244
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
INDF                              00000000
INICIA_SP                         00000104
INICIO                            00000005
INICIO1                           00000009
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IOFS                              00000002
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRP                               00000007
LEER_TEMP_ACTUAL                  00000257
LEE_MODO                          00000009
LEE_TEMP                          0000000C
MAQUINA_DE_INFERENCIA             00000261
MODO_OPERACION                    0000004F
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
NUEVE_NUEVE                       00000038
OERR                              00000001
OPTION_REG                        00000081
OSCCON                            0000008F
OSCTUNE                           00000090
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 23


SYMBOL TABLE
  LABEL                             VALUE 

OSFIE                             00000007
OSFIF                             00000007
OSTS                              00000003
OTRA_VEZ                          0000010C
P                                 00000004
PCL                               00000002
PCLATH                            0000000A
PCLATH_TEMP                       0000002A
PCON                              0000008E
PEIE                              00000006
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTA_com                         00000049
PORTB                             00000006
PORTB_com                         0000004A
PR2                               00000092
PRECARGA                          0000041A
PRECARGA_4_ms                     0000043F
PRECARGA_un_ms                    00000430
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
QUITA_TIEMPO                      0000011C
R                                 00000002
RBIE                              00000003
RBIF                              00000000
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
READ_WRITE                        00000002
REG_REBOTE1                       0000003E
REG_REBOTE2                       0000003F
RETARDO_PULSO                     00000040
RETARDO_PULSO_com                 00000042
REVISA_CRUCEx0                    0000023F
REVISA_D                          00000117
REVISA_U                          00000112
RP0                               00000005
RP1                               00000006
RX9                               00000006
RX9D                              00000000
R_W                               00000002
S                                 00000003
SALIR_AOTRO                       00000253
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 24


SYMBOL TABLE
  LABEL                             VALUE 

SCS0                              00000000
SCS1                              00000001
SEIS_CERO                         00000037
SIGUEPROG                         00000130
SMP                               00000007
SP                                00000026
SPBRG                             00000099
SPEN                              00000007
SP_INTERRUPT                      00000100
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
STATUS_TEMP                       00000029
SWDTE                             00000000
SWDTEN                            00000000
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1RUN                             00000006
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TERMINA_C_D                       00000237
TERMINA_C_U                       0000021B
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 25


SYMBOL TABLE
  LABEL                             VALUE 

TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISB                             00000086
TRMT                              00000001
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TUN5                              00000005
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
T_ADQ                             00000036
UA                                00000001
UNI                               00000024
UNI_com                           0000004B
VCFG0                             00000004
VCFG1                             00000005
VECES120                          00000050
VECES_MISMO_RET                   00000043
W                                 00000000
WCOL                              00000007
WDTCON                            00000105
WDTPS0                            00000001
WDTPS1                            00000002
WDTPS2                            00000003
WDTPS3                            00000004
WR                                00000001
WREN                              00000002
WRERR                             00000003
W_TEMP                            0000002B
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_CCP1_RB0                         00003FFF
_CCP1_RB3                         00002FFF
_CONFIG1                          00002007
_CONFIG2                          00002008
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00001FFF
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 26


SYMBOL TABLE
  LABEL                             VALUE 

_CP_OFF                           00003FFF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_EXTCLK                           00003FEF
_EXTRC_CLKOUT                     00003FFF
_EXTRC_IO                         00003FFE
_FCMEN_OFF                        00003FFE
_FCMEN_ON                         00003FFF
_HS_OSC                           00003FEE
_IESO_OFF                         00003FFD
_IESO_ON                          00003FFF
_INTRC_CLKOUT                     00003FFD
_INTRC_IO                         00003FFC
_LP_OSC                           00003FEC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_MCLR_OFF                         00003FDF
_MCLR_ON                          00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_1024                  00003BFF
_WRT_ENABLE_512                   00003DFF
_WRT_ENABLE_OFF                   00003FFF
_XT_OSC                           00003FED
__16F88                           00000001
configura_decenas                 0000021C
configura_interrupciones          0000028A
configura_oscilador               0000027E
configura_puertos                 00000283
configura_unidades                00000200
dece_comodin                      00000028
dece_no_es_cero                   00000226
desplegar_d_bcd                   0000029D
desplegar_u_bcd                   00000290
despliega_cero                    0000022D
despliega_cero_u                  00000211
esp_100micros                     00000449
esp_83micros                      00000465
esp_t250_micros                   00000450
esp_t500_micros                   0000045E
esp_t600_micros                   00000457
esp_t_adq                         00000424
limpia_registros                  00000265
pon_ceroU                         0000029B
si_es_cero                        00000229
si_es_cero_uni                    0000020D
si_sigue_opr                      00000233
si_sigue_opr_u                    00000217
sigue_despleg                     00000231
sigue_despleg_u                   00000215
t100_micros                       00000445
MPASM 03.60 Released                          CTRL_DIFUSO.ASM   8-20-2007  18:32:22         PAGE 27


SYMBOL TABLE
  LABEL                             VALUE 

t1_ms                             00000427
t250_micros                       0000044C
t250_ms                           0000040B
t4_ms                             00000436
t500_micros                       0000045A
t50msTMR0                         00000411
t600_micros                       00000453
t83_micros                        00000461
t_20micros                        00000420
t_adq_20micros                    00000420
terminaD                          000002AA
terminaU                          0000029C
tmedio_s                          00000400
uni_comodin                       00000027
uni_no_es_cero                    0000020A


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : X---XXXXXXXXXXXX XXXXXXXXXXXXXX-- ---------------- ----------------
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXX--------
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXX------
0400 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0440 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXX-------- ----------------

All other memory blocks unused.

Program Memory Words Used:   373
Program Memory Words Free:  3723


Errors   :    12
Warnings :     0 reported,     0 suppressed
Messages :    22 reported,     0 suppressed

